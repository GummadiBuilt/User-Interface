<div class="tenders">
    <div class="action-bar" fxLayout="row" fxLayoutAlign="space-between center">
        <div fxLayout="row" fxLayoutAlign="center center">
            <h2>Tenders</h2>
        </div>
        <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="24px">
            <div>
                <mat-form-field appearance="outline">
                    <input matInput placeholder="Search" (keyup)="applyFilter($event)" #input>
                    <button mat-icon-button matSuffix>
                        <mat-icon>search</mat-icon>
                    </button>
                </mat-form-field>
            </div>
            <!-- <div>
                <mat-form-field appearance="outline">
                    <mat-icon matPrefix>filter_alt</mat-icon>
                    <mat-select placeholder="Filter" (change)="onChange($event)">
                        <mat-select-filter [placeholder]="'Search'" [array]="filterGroupsArray"
                            (filteredReturn)="filterGroupsList =$event">
                        </mat-select-filter>
                        <mat-optgroup *ngFor="let group of filterGroups" [label]="group.name"
                            [disabled]="group.disabled">
                            <mat-option *ngFor="let filter of group.filter" [value]="filter.value">
                                {{filter.viewValue}}
                            </mat-option>
                        </mat-optgroup>
                    </mat-select>
                </mat-form-field>
            </div> -->

            <div>
                <mat-form-field appearance="outline">
                    <mat-icon matPrefix>filter_alt</mat-icon>
                    <mat-select placeholder="Filter" [formControl]="statusFilter" multiple>
                        <!-- <mat-option value="">All</mat-option> -->
                        <mat-option *ngFor="let status of statusList" [value]="status">
                            {{status}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <!-- <button mat-button type="reset" (click)="clearFilters()">
                <mat-icon matSuffix>close</mat-icon>
            </button> -->
            <div  *ngIf="userRole?.includes('client')">
                <button mat-raised-button routerLink="/create-tender">
                    <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="4px">
                        <mat-icon>add_circle</mat-icon>
                        <span>Create Tender</span>
                    </div>
                </button>
            </div>
        </div>
    </div>
    <div>
        <mat-button-toggle-group [value]="toggle" (change)="toggleView($event)">
            <mat-button-toggle [value]="true">
                List
            </mat-button-toggle>
            <mat-button-toggle [value]="false">
                Grid
            </mat-button-toggle>
        </mat-button-toggle-group>
    </div>
    <div *ngIf="toggle">
        <section class="example-container mat-elevation-z8">
            <table mat-table [dataSource]="dataSource">
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef> Tender ID </th>
                    <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                </ng-container>

                <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef> Description </th>
                    <td mat-cell *matCellDef="let element"> {{element.description}} </td>
                </ng-container>

                <ng-container matColumnDef="type_of_contract">
                    <th mat-header-cell *matHeaderCellDef> Type of Contract </th>
                    <td mat-cell *matCellDef="let element"> {{element.type_of_contract}} </td>
                </ng-container>

                <ng-container matColumnDef="type_of_work">
                    <th mat-header-cell *matHeaderCellDef> Type of Work </th>
                    <td mat-cell *matCellDef="let element"> {{element.type_of_work}} </td>
                </ng-container>

                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef> Status </th>
                    <td mat-cell *matCellDef="let element"> {{element.status}} </td>
                </ng-container>

                <ng-container matColumnDef="location">
                    <th mat-header-cell *matHeaderCellDef> Location </th>
                    <td mat-cell *matCellDef="let element"> {{element.location}} </td>
                </ng-container>

                <ng-container matColumnDef="last_date">
                    <th mat-header-cell *matHeaderCellDef> Last Date of Submission </th>
                    <td mat-cell *matCellDef="let element"> {{element.last_date}} </td>
                </ng-container>

                <ng-container matColumnDef="contract_duration">
                    <th mat-header-cell *matHeaderCellDef> Contract Duration </th>
                    <td mat-cell *matCellDef="let element"> {{element.contract_duration}} </td>
                </ng-container>

                <ng-container matColumnDef="tender_document">
                    <th mat-header-cell *matHeaderCellDef> Tender Document </th>
                    <td mat-cell *matCellDef="let element">
                        <div fxLayout="row">
                            <h5 class="text-maroon bold-500">Tender Document</h5>
                            <mat-icon class="download-icon">file_download</mat-icon>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef> Actions </th>
                    <td mat-cell *matCellDef="let element">
                        <button mat-stroked-button>
                            <div fxLayout="row" fxLayoutAlign="center center">
                                <mat-icon class="icon-edit">edit</mat-icon>
                                <span class="text-maroon">Edit</span>
                            </div>
                        </button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </section>
        <mat-paginator class="mat-elevation-z8" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users">
        </mat-paginator>
    </div>
    <div *ngIf="!toggle" class="tenders-page" fxLayout="row wrap" fxLayoutAlign="center center" fxLayoutGap="20px grid">
        <div fxFlex="50%" fxFlex.md="50%" fxFlex.xs="100%" fxFlex.sm="100%"
            *ngFor="let tender of dataSource.filteredData">
            <mat-card>
                <div fxLayout="column" fxLayoutGap="12px">
                    <div fxLayout="row" fxLayoutAlign="space-between center">
                        <a [routerLink]="['/tenders/', tender.id]">
                            <h3>Tender ID: {{tender.id}}</h3>
                        </a>
                        <h3>Status: {{tender.status}}</h3>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="space-between start">
                        <div fxLayout="column">
                            <h5><span class="text-maroon">Type of Work:</span> {{tender.type_of_work}}</h5>
                            <h5><span class="text-maroon">Description:</span> {{tender.description}}</h5>
                            <h5><span class="text-maroon">Type of Contract:</span> {{tender.type_of_contract}}</h5>
                        </div>
                        <div fxLayoutAlign="center center" fxLayoutGap="12px">
                            <button mat-stroked-button>
                                <div fxLayout="row" fxLayoutAlign="center center">
                                    <mat-icon class="icon-edit">edit</mat-icon>
                                    <span>Edit</span>
                                </div>
                            </button>
                            <button mat-stroked-button>
                                Contractors Applied
                            </button>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="space-between center">
                        <div fxLayout="row">
                            <mat-icon class="location-icon">location_on</mat-icon>
                            <h5>{{tender.location}}</h5>
                        </div>
                        <h5><span class="text-maroon">Contract Duration: </span>{{tender.contract_duration}}</h5>
                    </div>
                    <div>
                        <mat-divider></mat-divider>
                    </div>

                    <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                        <div fxLayout="row" fxLayoutAlign="center center">
                            <h5 class="text-maroon bold-500">Tender Document</h5>
                            <mat-icon class="download-icon">file_download</mat-icon>
                        </div>
                        <div fxLayout="row wrap" fxLayoutAlign="center center">
                            <h5 class="text-maroon bold-500">PQ Form Upload</h5>
                            <input type="file" class="file-input" hidden (change)="onFileSelected($event)" #fileUpload>
                            <mat-icon class="upload-icon" (click)="fileUpload.click()">file_upload</mat-icon>
                            {{fileName}}
                        </div>
                        <h5><span class="text-maroon">Last Date of Submission: </span>
                            {{tender.last_date}}</h5>
                    </div>
                </div>
            </mat-card>
        </div>
    </div>
</div>