<div class="tenders">
    <div *ngIf="router.url != '/tenders/create-tender'">
        <div class="action-bar" fxLayout="row" fxLayoutAlign="space-between center">
            <div fxLayout="row" fxLayoutAlign="center center">
                <h2>Tenders</h2>
            </div>
            <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="24px">
                <div *ngIf="userRole?.includes('client')">
                    <button mat-raised-button routerLink="create-tender">
                        <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="4px">
                            <mat-icon>add_circle</mat-icon>
                            <span>Create Tender</span>
                        </div>
                    </button>
                </div>
            </div>
        </div>
        <!-- <div class="search">
            <ng-advanced-search [headers]="headers" [inputArray]="rowData" 
            (outputArray)="displayTender = $event" [showFilterSaving]="true" [savedFilters]="saved">
            </ng-advanced-search>
        </div> -->
        <div>
            <mat-button-toggle-group [value]="toggle" (change)="toggleView($event)">
                <mat-button-toggle class="toggle-first" [value]="true">
                    List
                </mat-button-toggle>
                <mat-button-toggle class="toggle-last" [value]="false">
                    Grid
                </mat-button-toggle>
            </mat-button-toggle-group>
        </div>
        <div *ngIf="toggle">
            <ag-grid-angular class="ag-theme-alpine" [columnDefs]="columnDefs" [defaultColDef]="defaultColDef"
                [pagination]="true" [rowData]="rowData" [animateRows]="true" [sideBar]="sideBar"
                (gridReady)="onGridReady($event)" [frameworkComponents]="frameworkComponents">
            </ag-grid-angular>
        </div>
        <div *ngIf="!toggle" class="tenders-page" fxLayout="row wrap" fxLayoutAlign="center center"
            fxLayoutGap="20px grid">
            <div fxFlex="50%" fxFlex.md="50%" fxFlex.xs="100%" fxFlex.sm="100%" *ngFor="let tender of rowData">
                <mat-card>
                    <div fxLayout="column" fxLayoutGap="12px">
                        <div fxLayout="row" fxLayoutAlign="space-between center">
                            <a [routerLink]="['/tenders/', tender.id]">
                                <h3>Tender ID: {{tender.id}}</h3>
                            </a>
                            <h3>Status: {{tender.status}}</h3>
                        </div>
                        <div fxLayout="row" fxLayoutAlign="space-between start">
                            <div fxLayout="column">
                                <h5><span class="text-maroon">Type of Work:</span> {{tender.type_of_work}}</h5>
                                <h5><span class="text-maroon">Description:</span> {{tender.description}}</h5>
                                <h5><span class="text-maroon">Type of Contract:</span> {{tender.type_of_contract}}
                                </h5>
                            </div>
                            <div fxLayoutAlign="center center" fxLayoutGap="12px">
                                <button mat-stroked-button>
                                    <div fxLayout="row" fxLayoutAlign="center center">
                                        <mat-icon class="icon-edit">edit</mat-icon>
                                        <span>Edit</span>
                                    </div>
                                </button>
                                <button mat-stroked-button>
                                    Contractors Applied
                                </button>
                            </div>
                        </div>
                        <div fxLayout="row" fxLayoutAlign="space-between center">
                            <div fxLayout="row">
                                <mat-icon class="location-icon">location_on</mat-icon>
                                <h5>{{tender.location}}</h5>
                            </div>
                            <h5><span class="text-maroon">Contract Duration: </span>{{tender.contract_duration}}
                            </h5>
                        </div>
                        <div>
                            <mat-divider></mat-divider>
                        </div>

                        <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                            <div fxLayout="row" fxLayoutAlign="center center">
                                <h5 class="text-maroon bold-500">Tender Document</h5>
                                <mat-icon class="download-icon">file_download</mat-icon>
                            </div>
                            <div fxLayout="row wrap" fxLayoutAlign="center center">
                                <h5 class="text-maroon bold-500">PQ Form Upload</h5>
                                <input type="file" class="file-input" hidden (change)="onFileSelected($event)"
                                    #fileUpload>
                                <mat-icon class="upload-icon" (click)="fileUpload.click()">file_upload</mat-icon>
                                {{fileName}}
                            </div>
                            <h5><span class="text-maroon">Last Date of Submission: </span>
                                {{tender.last_date}}</h5>
                        </div>
                    </div>
                </mat-card>
            </div>
        </div>
    </div>
    <div>
        <router-outlet></router-outlet>
    </div>
</div>